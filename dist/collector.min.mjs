/**
 * collector@1.0.0 https://github.com/EvitcaStudio/Collector
 * Compiled 1/9/2024, 9:39:07 AM UTC
 * 
 * collector is licensed under a MIT styled License. See LICENSE.md for more info.
 * 
 * Copyright 2024, Evitca Studio, All Rights Reserved
 */
 var e={d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={},o=(e.d(t,{P:()=>n}),{d:(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)}),s={};o.d(s,{Y:()=>l});class l{constructor(e){this.RESET="[0m",this.BRIGHT="[1m",this.DIM="[2m",this.UNDERSCORE="[4m",this.BLINK="[5m",this.REVERSE="[7m",this.HIDDEN="[8m",this.FG_BLACK="[30m",this.FG_RED="[31m",this.FG_GREEN="[32m",this.FG_YELLOW="[33m",this.FG_BLUE="[34m",this.FG_MAGENTA="[35m",this.FG_CYAN="[36m",this.FG_WHITE="[37m",this.FG_GRAY="[90m",this.BG_BLACK="[40m",this.BG_RED="[41m",this.BG_GREEN="[42m",this.BG_YELLOW="[43m",this.BG_BLUE="[44m",this.BG_MAGENTA="[45m",this.BG_CYAN="[46m",this.BG_WHITE="[47m",this.BG_GRAY="[100m",this.TYPE_SPACER_LENGTH=13,this.types={default:this.FG_WHITE},this.currentType="",this.SPACE_CHAR=" ",this.FG_COLORS={};for(let e=0;e<=255;e++)this.FG_COLORS[e]="[38;5;"+e+"m";this.BG_COLORS={};for(let e=0;e<=255;e++)this.BG_COLORS[e]="[48;5;"+e+"m";Array.isArray(e)&&this.registerTypes(e)}prefix(e){return"string"==typeof e&&(this.currentType=e),this}message(t="log",...o){var s=this.currentType||"";if(0===s.length)console[t](...o);else{var l=s.length>=this.TYPE_SPACER_LENGTH;let e=this.types[s.toLowerCase()]?this.types[s.toLowerCase()]:this.types.default;var i=e.includes("");i||(e="color: "+e),!globalThis.window||i?console[t](e+s+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-s.length,l?1:0))+"|"+this.RESET,...o):console[t]("%c"+s+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-s.length,l?1:0))+"|",e,...o)}this.currentType=""}log(...e){this.message("log",...e)}info(...e){this.message("info",...e)}error(...e){this.message("error",...e)}warn(...e){this.message("warn",...e)}assert(...e){console.assert(...e)}debug(...e){this.message("debug",...e)}count(e){console.count(e)}countReset(e){console.countReset(e)}table(e,t){console.table(e,t)}time(e){this.message("time",e)}timeLog(e){this.message("timeLog",e)}timeEnd(e){this.message("timeEnd",e)}trace(...e){this.message("trace",...e)}group(e){this.message("group",e)}groupCollapsed(e){console.groupCollapsed(e)}groupEnd(){console.groupEnd()}clear(){console.clear()}registerType(e,t){this.types[e]||"string"==typeof e&&"string"==typeof t&&(this.types[e.toLowerCase()]=t)}registerTypes(t){if(Array.isArray(t))for(let e=0;e<t.length;e++)this.registerType(t[e].type,t[e].ansi)}unregisterType(e){this.types[e]&&delete this.types[e]}}var i=s.Y;class r{version="1.0.0";static DiobConstructor=(()=>{var e=VYLO.newDiob(),t=e.__proto__.constructor;return VYLO.delDiob(e),t})();collectionLimit=20;static WARNING_LIMIT=200;basicCollection=[];constructor(){this.logger=new i,this.logger.registerType("Collector-Module","#ff6600")}setMaxLimit(e){"number"==typeof e&&(this.collectionLimit=Math.round(e),this.collectionLimit>n.WARNING_LIMIT)&&this.logger.prefix("Collector-Module").warn("Collector: This is a high value to use for a max limit in a collection! Only use this high of a value if you know what you are doing.")}collect(t,o){const s=Array.isArray(t);if(t)if("object"!=typeof t||s||Object.keys(t).length)if(t.type||s){if(Array.isArray(o)){if(o.includes(t))return void this.logger.prefix("Collector-Module").error("Collector: OOPS! %cpCollected","font-weight: bold","already belongs to the provided collection.");if(s&&!t.length)return void this.logger.prefix("Collector-Module").error("Collector: OOPS! %cpCollected","font-weight: bold","is an array. But it contains nothing to recycle.");if(s){if(o.length>=this.collectionLimit){for(let e=t.length-1;0<=e;e--){const s=t[e];s instanceof r.DiobConstructor?(this.cleanInstance(s),VYLO.delDiob(s)):(this.cleanInstance(s),VYLO.delObject(s))}return}if(t.length+o.length>this.collectionLimit)for(let e=t.length-(this.collectionLimit-o.length);0<e;e--){const o=t[e];o instanceof r.DiobConstructor?(t.splice(e,1),this.cleanInstance(o),VYLO.delDiob(o)):(t.splice(e,1),this.cleanInstance(o),VYLO.delObject(o))}for(let e=t.length-1;0<=e;e--){var l=t[e];"function"==typeof l.onCollected&&l.onCollected(),o.includes(l)||o.push(l),this.cleanInstance(l)}return}return o.length>=this.collectionLimit?void(t instanceof r.DiobConstructor?(this.cleanInstance(t),VYLO.delDiob(t)):(this.cleanInstance(t),VYLO.delObject(t))):("function"==typeof t.onCollected&&t.onCollected(),o.includes(t)||o.push(t),void this.cleanInstance(t))}this.logger.prefix("Collector-Module").error("Collector: Invalid variable type passed for the %cpCollection","font-weight: bold","parameter. Expecting an array. Collect failed.")}else this.logger.prefix("Collector-Module").error("Collector: OOPS! %cpCollected","font-weight: bold"," is not a valid object It has no type.");else this.logger.prefix("Collector-Module").error("Collector: OOPS! %cpCollected","font-weight: bold"," is an empty object and will NOT be collected.");else this.logger.prefix("Collector-Module").error("Collector: There was nothing passed for the %cpCollected","font-weight: bold","parameter. Expecting a instance or an object.")}isInCollection(t="Diob",o=1,s=[],...l){var i,r=[];let n=0,c=o,a=!VYLO.Type.getVariable(t,"baseType");if(s.length){for(let e=s.length-1;0<=e;e--)c&&(i=s[e]).type===t&&(s.splice(e,1),r.push(i),i.collectorCollected=!1,"function"==typeof i.onDumped&&i.onDumped(...l),n++,c--);if(o>n){const s=o-n;for(let e=0;e<s;e++)r.push(a?VYLO.newObject(t,...l):VYLO.newDiob(t,...l))}}else for(let e=0;e<o;e++)r.push(a?VYLO.newObject(t,...l):VYLO.newDiob(t,...l));return 1===r.length?r.pop():r}cleanInstance(e){if(e){if(e instanceof r.DiobConstructor){var t="Interface"===e.baseType||"Interface"===e.type||VYLO.Type.getInheritances(e.type).includes("Interface");e.color&&("object"==typeof e.color&&e.color.constructor===Object?(e.color.tint=16777215,e.color=e.color):e.color=null),"object"==typeof e.scale?(e.scale.x=e.scale.y=1,e.scale=e.scale):e.scale=1,t&&(e.hide(),"server"!==VYLO.World.getCodeType())&&VYLO.Client.removeInterfaceElement(e.getInterfaceName(),e,!0),e.playAnimation(),e.setTransition(),e.angle=0,e.alpha=1,e.xPos=0,e.yPos=0,t||(e.mapName=null,e.setLoc()),e.text="",e.composite="","Movable"===e.baseType&&e.move();for(const o of e.getOverlays())e.removeOverlay(o.type);for(const s of e.getFilters())e.removeFilter(s)}e.collectorCollected=!0,e.inTicker=null,"function"==typeof e.clean&&e.clean()}}}const n=new r;var c=t.P;export{c as Collector};